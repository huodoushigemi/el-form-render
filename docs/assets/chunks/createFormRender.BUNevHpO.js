import{a8 as P,aw as w,p as H,aD as U,a9 as W,aa as _,L as N,G as I,ac as z,aI as A,ae as q,b5 as J,H as Q,d as B,af as X,K as $,a2 as Y,r as Z,V as p}from"./framework.BBFbQ79s.js";import{M as ee,N as ne,O as te}from"./theme.D-Umib_T.js";const C=new WeakMap,ve=e=>{if(!e)return;if(C.has(e))return C.get(e).value;const r=H([]);C.set(e,r);const t=g(e);return U(t)?t.then(c=>r.value=c.map(D)):r.value=t.map(D),r.value},be=e=>(e==null?void 0:e.label)??(e==null?void 0:e.value),D=e=>W(e)?{label:e,value:e}:_(e)?{label:e[0],value:e[1]}:e,le=(e,r,t={})=>({get(){const s=P(e),i=P(r);if(i==null)return;let n=T(t.untrackedGet?w(s):s,i);return t.get&&(n=t.get(n,s)),t.defaultValue!==void 0&&(n===void 0||n==="")&&j(s,i,n=g(t.defaultValue)),t.displayValue!==void 0&&(n===void 0||n==="")&&(n=g(t.displayValue)),n},set(s){const i=P(e),n=P(r);n!=null&&(t.silentSet?j(w(i),n,t.silentSet(s,i)):t.set?j(i,n,t.set(s,i)):j(i,n,s),t.out&&Object.assign(i,t.out(s,i)),s=T(i,n),t.displayValue!==void 0&&s===g(t.displayValue)&&ae(w(i),n))},get v(){return this.get()},set v(s){this.set(s)},get value(){return this.get()},set value(s){this.set(s)},__v_isRef:!0}),re=/^\d+$/,g=(e,...r)=>typeof e=="function"?e(...r):e;function T(e,r){if(typeof r=="function")return r(e);for(const t of r.split("."))if(!(e=e[t]))break;return e}function j(e,r,t){return r.split(".").reduce((c,s,i,n)=>i==n.length-1?c[s]=t:c[s]??(c[s]=re.test(n[i+1])?[]:{}),e)}function ae(e,r){var c;const t=r.split(".");t.length>1?(c=T(e,t.slice(0,-1).join(".")))==null||delete c[t[t.length-1]]:delete e[t[0]]}const se={is:null,lp:[String,Array],type:String,defaultValue:null,displayValue:null,hide:[Boolean,Function],get:Function,set:Function,out:Function,options:[Array,Object,Function],rules:null,el:Object};for(var M=256,ie=[];M--;)ie[M]=(M+256).toString(16).substring(1);const G=(e,...r)=>typeof e=="function"?e(...r):e,ue=(e,r)=>Object.fromEntries(Object.entries(e).map(([t,c])=>[t,r(c)]));function ce({defaultIs:e,processProps:r=t=>t}){const t=(n,a)=>A(n)?i(n,a):n,c=(n,a)=>{const{is:o,vIf:m,children:u,...d}=n=r(n,a,{provide:f=>a={...a,...f}});return!z(n,"vIf")||G(m)?I(Q(o||e),d,_(u)?{default:()=>u.map(f=>t(f,a))}:A(u)?ue(u,f=>v=>s(f,a,v)):q(u)?{default:()=>{const f=u();return _(f)?f.map(v=>t(v,a)):f}}:u!=null&&!J(o)?{default:()=>u}:u):null},s=(n,a,o)=>{if(n.scope)if(n.scope[0]=="{"){a={...a};for(const d of n.scope.slice(1,-1).split(","))a[d.trim()]=o[d.trim()]}else a={...a,[n.scope]:o};const{vIf:m,children:u}=r(n,a,{provide:d=>a={...a,...d}});return!z(n,"vIf")||G(m)?_(u)?u.map(d=>t(d,a)):A(u)?i(u,a):u:null};function i(n,a={}){if(n.vFor){const{vFor:o}=n,{vFor:m}=r({vFor:o},a,{});if(_(m))return m[0].map((u,d)=>{const f={[m[1]||"item"]:u,[m[1]||"index"]:d};return c(n,{...a,...f})})}else return c(n,a)}return n=>{const a=N("vars",void 0);return i(n,a)}}const oe={label:"label",prop:"prop",modelValue:"modelValue",rules:"rules",inputSlot:"default"};function ye({Form:e,formName:r,formProps:t,FormItem:c,formItemName:s,formItemProps:i,Input:n,fields:a}){const o={...oe,...a},m=Object.keys(i),u=Symbol(),d=l=>Array.isArray(l)?l:l?[l,X(l)]:[],f=l=>l[o.label]||d(l.lp)[0],v=l=>l[o.prop]||d(l.lp)[1],E=(l,R)=>g(l[o.rules],R),k={...i,...se},x=B({props:k,name:s,setup(l,{slots:R}){const F=N(u),V=ee(()=>(F==null?void 0:F.model)||Y({})),O=le(V,()=>v(l),l);return()=>{var y;const S={...ne(l,m),[o.label]:f(l),[o.prop]:v(l),[o.rules]:E(l,V),".__transformer":O},b=$({[g(o.modelValue,l)]:O.get(),[`onUpdate:${g(o.modelValue,l)}`]:O.set},{...l.el||{},disabled:g((y=l.el)==null?void 0:y.disabled,V)});return g(l.hide,V)?void 0:I(c,S,{...R,default:void 0,[o.inputSlot]:()=>{var L;const h=Z(R,"default");return h.children[0]?h.children[0].props=Object.assign(b,h.children[0].props):(L=h.children)[0]??(L[0]=n({...l,el:b})),h}})}}}),K={...t,...{model:Object,items:Array}};return{FormRender:B({name:r,props:K,setup(l,{attrs:R,slots:F,expose:V}){const O=ce({defaultIs:(b,{slots:y})=>I(x,b,{default:y[`$${v(b)}`]??y.default})}),S=H({});return V(te(S)),p(u,l),()=>I(e,$({ref:S},{...l,...R}),{default:()=>{var b,y;return[(b=l.items)==null?void 0:b.map(h=>I(O,$(h,{key:v(h)}),null)),(y=F.default)==null?void 0:y.call(F)]}})}}),formRenderProps:K,FormItemRender:x,formItemRenderProps:k}}export{be as a,ye as c,T as g,ve as s,g as u};
